<template>
  <div id="map-box">
    <div id="map"></div>
    <!--<map-con :mapConfig = mapConfig @getConfig="getConfig"></map-con>-->
    <base-map :map="map" :baseMapConfig="baseMapConfig" @getBaseMap="getBaseMap"></base-map>
    <!--<chart :id="'comBar'" :type="'bar,comBar'" style="position:fixed;z-index:9999;left:0;top:10px;width: 500px;height:400px"></chart>-->
  </div>
</template>
<script>
    import Vue from "vue";
    import mapboxgl from 'mapbox-gl';
    import '@supermap/iclient-mapboxgl';
    export default {
        name: 'home',
        data(){
            return {
                map:null,
                baseMapConfig:[
                    {
                        name: "矢量图",
                        key: "map_vec",
                        path: 'https://iserver.supermap.io/iserver/services/map-china400/rest/maps/China/zxyTileImage.png?prjCoordSys={"epsgCode":3857}&z={z}&x={x}&y={y}',
                        bounds: "",
                        label: "",
                        center: [],
                        zIndex: 0,
                        checked:false,
                        isShow: true
                    },
                    {
                        name: "地形图",
                        key: "map_ter",
                        path: 'https://iserver.supermap.io/iserver/services/maps/rest/maps/World/zxyTileImage.png?prjCoordSys={"epsgCode":3857}&z={z}&x={x}&y={y}',
                        bounds: "",
                        label: "",
                        center: [],
                        zIndex: 0,
                        checked:false,
                        isShow: true
                    },
                    {
                        name: "影像图",
                        key: "map_img",
                        path: 'https://iserver.supermap.io/iserver/services/maps/rest/maps/World/zxyTileImage.png?prjCoordSys={"epsgCode":3857}&z={z}&x={x}&y={y}',
                        bounds: "",
                        label: "",
                        center: [],
                        zIndex: 1,
                        checked:true,
                        isShow: true
                    },
                    {
                        name: "黑夜图",
                        key: "map_blk",
                        path: 'https://iserver.supermap.io/iserver/services/map-china400/rest/maps/ChinaDark/zxyTileImage.png?prjCoordSys={"epsgCode":3857}&z={z}&x={x}&y={y}',
                        bounds: "",
                        label: "",
                        center: [],
                        zIndex: 2,
                        checked:false,
                        isShow: true
                    }
                ],
                mapConfig:{
                    boderConfig:{
                        isShow:true,
                        color:"#fff",
                        width:1
                    },
                    opacity:{
                        isShow:true,
                        value:1,
                    },
                    renderColor:{
                        isShow:true,
                        defaultConfigColorArr:[
                            {
                                colorArr:[
                                    "rgb(247,252,245)",
                                    "rgb(229,245,224)",
                                    "rgb(199,233,192)",
                                    "rgb(161,217,155)",
                                    "rgb(116,196,118)",
                                    "rgb(65,171,93)",
                                    "rgb(35,139,69)",
                                    "rgb(0,109,44)",
                                    "rgb(0,68,27)"
                                ],
                                styleStr:"",
                                colorName:"蜜瓜绿-深绿色"
                            },
                            {
                                colorArr:[
                                    "rgb(255,255,229)",
                                    "rgb(255,247,188)",
                                    "rgb(254,227,145)",
                                    "rgb(254,196,79)",
                                    "rgb(254,153,41)",
                                    "rgb(236,112,20)",
                                    "rgb(204,76,2)",
                                    "rgb(153,52,4)",
                                    "rgb(102,37,6)"
                                ],
                                styleStr:"",
                                colorName:"浅黄-红褐色"
                            },
                            {
                                colorArr:[
                                    "rgb(247,252,240)",
                                    "rgb(224,243,219)",
                                    "rgb(204,235,197)",
                                    "rgb(168,221,181)",
                                    "rgb(123,204,196)",
                                    "rgb(78,179,211)",
                                    "rgb(43,140,190)",
                                    "rgb(8,104,172)",
                                    "rgb(8,64,129)"
                                ],
                                styleStr:"",
                                colorName:"绿色-蓝色"
                            },
                            {
                                colorArr:[
                                    "rgb(255,247,236)",
                                    "rgb(254,232,200)",
                                    "rgb(253,212,158)",
                                    "rgb(253,187,132)",
                                    "rgb(252,141,89)",
                                    "rgb(239,101,72)",
                                    "rgb(215,48,31)",
                                    "rgb(179,0,0)",
                                    "rgb(127,0,0)",
                                ],
                                styleStr:"",
                                colorName:"黄色-橙色"
                            },
                            {
                                colorArr: [
                                    "rgb(255,245,193)",
                                    "rgb(255,240,163)",
                                    "rgb(255,235,133)",
                                    "rgb(255,230,102)",
                                    "rgb(255,225,72)",
                                    "rgb(255,220,42)",
                                    "rgb(255,214,11)",
                                ],
                                styleStr: "",
                                colorName: '浅黄-亮黄'
                            },
                            {
                                colorArr: [
                                    'rgb(244, 209, 102)',
                                    'rgb(209, 201, 95)',
                                    'rgb(175, 193, 91)',
                                    'rgb(142, 184, 88)',
                                    'rgb(111, 172, 86)',
                                    'rgb(84, 160, 84)',
                                    'rgb(67, 147, 80)',
                                    'rgb(53, 133, 75)',
                                    'rgb(38, 120, 65)',
                                    'rgb(20, 108, 54)',
                                ],
                                styleStr: "",
                                colorName: '金色-绿色'
                            },
                            {
                                colorArr: [
                                    'rgb(188, 228, 216)',
                                    'rgb(160, 212, 209)',
                                    'rgb(135, 198, 204)',
                                    'rgb(110, 184, 197)',
                                    'rgb(83, 169, 189)',
                                    'rgb(62, 153, 180)',
                                    'rgb(53, 137, 169)',
                                    'rgb(51, 120, 157)',
                                    'rgb(47, 104, 145)',
                                    'rgb(44, 89, 133)',
                                ],
                                styleStr: "",
                                colorName: '蓝绿色-蓝色'
                            },
                            {
                                colorArr: [
                                    'rgb(185, 221, 241)',
                                    'rgb(164, 206, 233)',
                                    'rgb(144, 190, 222)',
                                    'rgb(126, 174, 211)',
                                    'rgb(110, 159, 199)',
                                    'rgb(95, 144, 186)',
                                    'rgb(80, 129, 174)',
                                    'rgb(68, 114, 160)',
                                    'rgb(56, 101, 146)',
                                    'rgb(42, 89, 133)',
                                ],
                                styleStr: "",
                                colorName: '蓝色'
                            },
                            {
                                colorArr: [
                                    'rgb(241, 241, 241)',
                                    'rgb(234, 230, 210)',
                                    'rgb(227, 220,181)',
                                    'rgb(221, 210, 153)',
                                    'rgb(214, 200, 126)',
                                    'rgb(208, 190, 101)',
                                    'rgb(202, 181, 78)',
                                    'rgb(195, 171, 55)',
                                    'rgb(188, 162, 34)',
                                    'rgb(183, 155, 15)',
                                ],
                                styleStr: "",
                                colorName: '金黄色'
                            },
                            {
                                colorArr: [
                                    'rgb(238, 219, 189)',
                                    'rgb(235, 200, 146)',
                                    'rgb(231, 181,117)',
                                    'rgb(225, 162, 96)',
                                    'rgb(215, 145, 85)',
                                    'rgb(203, 127, 79)',
                                    'rgb(194, 108, 67)',
                                    'rgb(185, 89, 56)',
                                    'rgb(174, 69, 51)',
                                    'rgb(159, 54, 50)',
                                ],
                                styleStr: "",
                                colorName: '暗红色'
                            },
                            {
                                colorArr: [
                                    'rgb(255, 198, 133)',
                                    'rgb(249, 181, 99)',
                                    'rgb(245, 163,67)',
                                    'rgb(244, 142, 50)',
                                    'rgb(239, 121, 37)',
                                    'rgb(230, 103, 32)',
                                    'rgb(213, 91, 33)',
                                    'rgb(195, 81, 34)',
                                    'rgb(176, 71, 35)',
                                    'rgb(158, 61, 34)',
                                ],
                                styleStr: "",
                                colorName: '橙色'
                            },
                            {
                                colorArr: [
                                    'rgb(254,255,217)',
                                    'rgb(217,251,200)',
                                    'rgb(238,248,183)',
                                    'rgb(223, 243, 178)',
                                    'rgb(205, 237, 177)',
                                    'rgb(180, 227, 179)',
                                    'rgb(148, 214, 183)',
                                    'rgb(118, 202, 188)',
                                    'rgb(91, 192, 192)',
                                    'rgb(65, 183, 196)',
                                ],
                                styleStr: "",
                                colorName: '蓝色-绿色连续'
                            },
                            {
                                colorArr: [
                                    'rgb(229,229,229)',
                                    'rgb(225,227,231)',
                                    'rgb(222,226,232)',
                                    'rgb(219, 225, 234)',
                                    'rgb(219, 225, 234)',
                                    'rgb(211, 222, 237)',
                                    'rgb(208, 220, 239)',
                                    'rgb(204, 218, 240)',
                                    'rgb(200, 217, 241)',
                                    'rgb(196, 216, 243)',
                                ],
                                styleStr: "",
                                colorName: '浅蓝色'
                            },
                            {
                                colorArr: [
                                    'rgb(229,229,229)',
                                    'rgb(231,224,220)',
                                    'rgb(234,221,212)',
                                    'rgb(237,217,203)',
                                    'rgb(240,213,194)',
                                    'rgb(243,209,185)',
                                    'rgb(246,205,176)',
                                    'rgb(248,200,166)',
                                    'rgb(251,196,157)',
                                    'rgb(255,192,147)',
                                ],
                                styleStr: "",
                                colorName: '浅橙色'
                            },
                            {
                                colorArr: [
                                    'rgb(82,153,133)',
                                    'rgb(97,156,119)',
                                    'rgb(113,159,105)',
                                    'rgb(140, 170, 93)',
                                    'rgb(179, 188, 82)',
                                    'rgb(229, 199, 73)',
                                    'rgb(73, 191, 76)',
                                    'rgb(234, 171, 78)',
                                    'rgb(214, 139, 79)',
                                    'rgb(194, 194, 81)',
                                ],
                                styleStr: "",
                                colorName: '温度发散'
                            }
                        ],
                    }
                }
            }
        },
        mounted(){
            this.map=Vue.prototype.$map = new mapboxgl.Map({
                container: 'map',
                style:{
                    "version": 8,
                    "sources": {
                        "raster-tiles": {
                            "type": "raster",
                            "tiles": ['https://iserver.supermap.io/iserver/services/map-china400/rest/maps/China/zxyTileImage.png?prjCoordSys={"epsgCode":3857}&z={z}&x={x}&y={y}'],
                            "tileSize": 256
                        }
                    },
                    "layers": [{
                        "id": "simple-tiles",
                        "type": "raster",
                        "source": "raster-tiles",
                        "minzoom": 0,
                        "maxzoom": 22
                    }],
                },
                center: [104.3, 32],
                minZoom: 3.5,
                zoom: 3.5,
                maxZoom: 18,
                renderWorldCopies: false,
                preserveDrawingBuffer: !0,
                /*pitch: 60,
                 bearing: 0//旋转角度
                 */
            });
        },
        methods:{
            getConfig:function (val) {
                console.log(val);
            },
            getBaseMap:function(val){
                console.log(val);
            }
        }
    }
</script>
<style lang="scss">
  #map-box {
    position: fixed;
    width: 100%;
    height: 100%;
    z-index: -1;
    left: 0;
    top: 0;
    #map {
      width: 100%;
      height: 100%;

    }
    .mapboxgl-canvas {
      left: 0;
    }
  }
</style>
